import{r as a,j as e}from"./react-vendor-b1xrIhnT.js";import{f as b}from"./index-DE5sUipX.js";import"./vendor-g6wOUL2o.js";import"./chart-Dt6o3ARI.js";const P=()=>{const[c,h]=a.useState([]),[d,i]=a.useState(!0),[t,l]=a.useState(1),[r,m]=a.useState(1),[o,g]=a.useState(""),[n,u]=a.useState(""),j=20,x=async(s={})=>{i(!0);try{const p=await b({page:t,pageSize:j,symbol:o||void 0,boundary:n==="upper"||n==="lower"?n:void 0,...s});h(p.data),m(p.totalPages),s.page&&l(s.page)}finally{i(!1)}};a.useEffect(()=>{x()},[t]);const y=()=>{l(1),x({page:1})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert History"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide",children:"Symbol"}),e.jsx("input",{value:o,onChange:s=>g(s.target.value),className:"bg-gray-800 px-2 py-1 rounded w-32",placeholder:"e.g. NIFTY"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide",children:"Boundary"}),e.jsxs("select",{value:n,onChange:s=>u(s.target.value),className:"bg-gray-800 px-2 py-1 rounded w-32",children:[e.jsx("option",{value:"",children:"Any"}),e.jsx("option",{value:"upper",children:"Upper"}),e.jsx("option",{value:"lower",children:"Lower"})]})]}),e.jsx("button",{onClick:y,className:"bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded",children:"Apply"})]}),d&&e.jsx("div",{className:"text-sm opacity-60",children:"Loading..."}),!d&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left opacity-70",children:[e.jsx("th",{className:"p-2",children:"Time"}),e.jsx("th",{children:"Symbol"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Boundary"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Threshold"})]})}),e.jsxs("tbody",{children:[c.map(s=>e.jsxs("tr",{className:"odd:bg-gray-900 even:bg-gray-800",children:[e.jsx("td",{className:"p-2 whitespace-nowrap",children:new Date(s.triggeredAt||s.time).toLocaleString()}),e.jsx("td",{children:s.symbol}),e.jsx("td",{children:s.name}),e.jsx("td",{className:s.boundary==="upper"?"text-emerald-400":"text-rose-400",children:s.boundary}),e.jsx("td",{children:s.price}),e.jsx("td",{children:s.threshold??"-"})]},s._id)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-center opacity-60",children:"No alerts"})})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center text-xs",children:[e.jsx("button",{disabled:t<=1,onClick:()=>l(s=>Math.max(1,s-1)),className:"px-2 py-1 bg-gray-800 rounded disabled:opacity-40",children:"Prev"}),e.jsxs("span",{children:["Page ",t," / ",r]}),e.jsx("button",{disabled:t>=r,onClick:()=>l(s=>Math.min(r,s+1)),className:"px-2 py-1 bg-gray-800 rounded disabled:opacity-40",children:"Next"})]})]})};export{P as AlertsPage,P as default};
